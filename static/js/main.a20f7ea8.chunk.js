(this["webpackJsonptest-react-app"]=this["webpackJsonptest-react-app"]||[]).push([[0],{49:function(e,t,a){e.exports=a(69)},54:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(18),s=a.n(c),i=a(84),o=(a(54),a(6)),u=a.n(o),l=a(22),m=a(2),f=a(10),p=a(13),E=a(4),b=a(26),h=a.n(b);function g(){return(g=Object(f.a)(u.a.mark((function e(t){var a,r,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.searchBy,r=t.tracksPerPage,n=t.offset,e.next=3,h.a.get("/tracks",{q:a,limit:r,offset:n});case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}h.a.initialize({client_id:"ggX0UomnLs0VmW7qZnCzw"});var d={getTracks:function(e){return g.apply(this,arguments)}},v={saveToStorage:function(e,t){localStorage.setItem(e,JSON.stringify(t))},loadFromStorage:function(e){var t=localStorage.getItem(e);return JSON.parse(t)}};function S(e){return function(t){t({type:"SET-IS-LOADING",status:e})}}function O(e){return function(t){return t({type:"UPDATE-QUERY",updatedQuery:e}),Promise.resolve()}}function j(e){return function(t){return e.length>5&&e.pop(),v.saveToStorage("user-searches",e),t({type:"UPDATE-RECENT_SEARCHES",searches:e}),Promise.resolve()}}function k(e){return function(t){return t({type:"UPDATE-IS-RECENT-SEARCH",val:e}),Promise.resolve()}}function y(e){return function(){var t=Object(f.a)(u.a.mark((function t(a){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.getTracks(e);case 3:r=t.sent,a(T(r)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Could not retrieve Soundcloud data:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function T(e){return{type:"SET-TRACKS",data:e}}function w(e){var t=e.track,a=e.chooseTrack,c=e.titleLimit,s=e.currPlayingId,i=(e.previewMode,Object(r.useRef)()),o=t.artwork_url?t.artwork_url:"./missing-image.jpg",u=t.title.length<c?t.title:t.title.slice(0,c)+"...",l=s!==t.id?"":"highlight";return n.a.createElement("section",{onClick:function(){var e={top:i.current.y,left:i.current.x};a(t.id,t.artwork_url,e)},className:"track-list-item flex align-center"},n.a.createElement("div",{className:"img-wrapper"},n.a.createElement("img",{ref:i,src:o,alt:""})),n.a.createElement("div",{className:"details flex column align-flex-start justify-between"},n.a.createElement("h4",{className:l},u),n.a.createElement("p",null,t.user.username)))}function N(e){var t=e.tracks,a=e.chooseTrack,r=e.previewMode,c=e.currPlayingId,s="list"===r?60:75;return n.a.createElement("section",{className:"tracks-list ".concat(r)},t.map((function(e){return n.a.createElement(w,{key:e.id,chooseTrack:a,track:e,currPlayingId:c,titleLimit:s,previewMode:r})})))}var C=a(36),R=a.n(C),P=a(37),x=a.n(P),A=a(34),I=a.n(A),U=a(35),_=a.n(U);function L(e){var t=e.changePage,a=e.changePreviewMode,r=e.offset,c=e.previewMode,s=0!==e.tracks.length?"":"mute",i=0!==r?"":"mute";return n.a.createElement("section",{className:"list-controllers flex justify-between align-center"},n.a.createElement("section",{className:"paging-btns-container flex align-center"},n.a.createElement("button",{className:"paging-btn ".concat(i),onClick:function(){t("prev")}},n.a.createElement(I.a,null)),n.a.createElement("button",{className:"paging-btn ".concat(s),onClick:function(){t("next")}},n.a.createElement(_.a,null))),n.a.createElement("div",{className:"preview-mode-btns-container flex align-center"},n.a.createElement("div",{className:"list-btn ".concat("tile"===c?"mute":"")},n.a.createElement(R.a,{onClick:function(){a("list")}})),n.a.createElement("div",{className:"tile-btn ".concat("list"===c?"mute":"")},n.a.createElement(x.a,{onClick:function(){a("tile")}}))))}var D=a(38),M=a.n(D),B=a(83);function H(e){var t=e.clearRecentSearch,a=e.handleChange,r=e.inputVal,c=e.submitSearch,s=Object(E.c)((function(e){return e.appStore.isLoading}));return n.a.createElement("form",{className:"seach-bar flex align-center justify-between",onSubmit:c},n.a.createElement("input",{className:"search-input",type:"text",placeholder:"Play something",value:r,onChange:a,onFocus:t}),n.a.createElement("div",{className:"search-btn-wrapper flex align-center justify-center"},!s&&n.a.createElement(M.a,{onClick:c,className:"search-icn"}),s&&n.a.createElement(B.a,{color:"primary",className:"search-icn"})),n.a.createElement("button",{hidden:!0}))}function q(){var e=Object(E.b)(),t=Object(E.c)((function(e){return e.appStore.tracks})),a=Object(E.c)((function(e){return e.appStore.currTrack})),c=Object(E.c)((function(e){return e.appStore.query})),s=Object(E.c)((function(e){return e.appStore.recentSearches})),i=Object(E.c)((function(e){return e.appStore.readRecentSearch})),o=Object(E.c)((function(e){return e.appStore.centerImgPos})),b=Object(r.useState)(""),h=Object(p.a)(b,2),g=h[0],d=h[1],T=Object(r.useState)("list"),w=Object(p.a)(T,2),C=w[0],R=w[1],P=Object(r.useState)(null),x=Object(p.a)(P,2),A=x[0],I=x[1];Object(r.useEffect)((function(){var e=v.loadFromStorage("user-preview-mode");e&&R(e)}),[]),Object(r.useEffect)((function(){i&&d(c.searchBy)}));var U=function(){var t=Object(f.a)(u.a.mark((function t(a){var r,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),(r=Object(m.a)({},c)).searchBy=g,r.offset=0,""!==g.trim()){t.next=9;break}return e((function(e){return e({type:"CLEAR-TRACKS"}),Promise.resolve()})),r.offset=0,e(O(r)),t.abrupt("return");case 9:return e(O(r)),e(S(!0)),t.next=14,e(y(r));case 14:if(e(S(!1)),!(s.filter((function(e){return e===g})).length>0)){t.next=18;break}return t.abrupt("return");case 18:(n=Object(l.a)(s)).unshift(g),e(j(n));case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_=function(){var a=Object(f.a)(u.a.mark((function a(r){var n,s;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(0!==t.length){a.next=2;break}return a.abrupt("return");case 2:if("next"!==r){a.next=6;break}n=c.offset+c.tracksPerPage,a.next=9;break;case 6:if(0!==c.offset){a.next=8;break}return a.abrupt("return");case 8:n=c.offset-c.tracksPerPage;case 9:return(s=Object(m.a)({},c)).offset=n,e(O(s)),e(S(!0)),a.next=16,e(y(s));case 16:e(S(!1));case 17:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return n.a.createElement("main",null,n.a.createElement("section",{className:"tracks-dashboard-container"},n.a.createElement(H,{inputVal:g,handleChange:function(e){var t=e.target.value;d(t)},clearRecentSearch:function(){e(k(!1))},submitSearch:U}),n.a.createElement("section",{className:"tracks-list-container"},t.length>0&&n.a.createElement(N,{tracks:t,currPlayingId:a?a.id:"",chooseTrack:function(r,n,c){if(!a||r!==a.id){var s={imgUrl:n,opacity:1,startTransitionPos:c};I(s),console.log(s),setTimeout((function(){I(s={imgUrl:n,opacity:0,startTransitionPos:o})}),0),setTimeout((function(){I(null);var a,n=t.findIndex((function(e){return e.id===r}));e((a=t[n],function(e){return e({type:"SET-CURR-TRACK",trackToSet:a}),Promise.resolve()}))}),500)}},previewMode:C})),n.a.createElement(L,{changePage:_,changePreviewMode:function(e){R(e),v.saveToStorage("user-preview-mode",e)},offset:c.offset,previewMode:C,tracks:t})),A&&n.a.createElement("div",{style:{top:A.startTransitionPos.top,left:A.startTransitionPos.left},className:"img-transition"},n.a.createElement("img",{style:{opacity:A.opacity},className:C,src:A.imgUrl,alt:""})))}var K=a(39),V=a.n(K);function W(){var e=Object(E.b)(),t=Object(E.c)((function(e){return e.appStore.currTrack})),a=Object(r.useRef)(),c=Object(r.useState)(!1),s=Object(p.a)(c,2),i=s[0],o=s[1],u=Object(r.useState)(!1),l=Object(p.a)(u,2),m=l[0],f=l[1],b=Object(r.useState)(""),h=Object(p.a)(b,2),g=h[0],d=h[1];Object(r.useEffect)((function(){i||(v(),o(!0)),t&&!g&&d(t.id),t&&g&&t.id!==g&&(console.log("change"),d(t.id),f(!0),setTimeout((function(){f(!1)}),0))}));var v=function(){var t=a.current.offsetTop+a.current.clientHeight/2,r=a.current.offsetLeft+a.current.clientWidth/2;e(function(e){return function(t){t({type:"UPDATE-CENTER-IMG-POS",params:e})}}({top:t,left:r}))};return n.a.createElement("main",{className:"track-player-container flex column align-center justify-between"},n.a.createElement("div",{ref:a,className:"img-wrapper flex align-center justify-center"},!t&&n.a.createElement("img",{src:"./record-player.png",alt:""}),t&&n.a.createElement("img",{className:"track-img",src:t.artwork_url,alt:""})),t&&n.a.createElement("h2",null,t.title),t&&n.a.createElement("p",null,"By: ",t.user.username),t&&!m&&n.a.createElement(V.a,{client_id:"ggX0UomnLs0VmW7qZnCzw",audio_id:t.id.toString(),auto_play:!0,title:t.title}))}function F(e){var t=e.searchItem,a=e.selectSearch;return n.a.createElement("div",{className:"recent-search-preview"},n.a.createElement("button",{onClick:function(){a(t)}},t))}function G(e){var t=e.searches,a=e.selectSearch;return n.a.createElement("section",{className:"recent-search-list flex column"},t.map((function(e,t){return n.a.createElement(F,{key:t,searchItem:e,selectSearch:a})})))}var J=a(42),Q=a.n(J);function X(){var e=Object(E.b)(),t=Object(E.c)((function(e){return e.appStore.recentSearches})),a=Object(E.c)((function(e){return e.appStore.query}));Object(r.useEffect)((function(){e((function(e){var t=v.loadFromStorage("user-searches");if(t)return e({type:"UPDATE-RECENT_SEARCHES",searches:t}),Promise.resolve(t)}))}),[]);var c=function(){var t=Object(f.a)(u.a.mark((function t(r){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=Object(m.a)({},a)).searchBy=r,n.offset=0,e(O(n)),e(S(!0)),t.next=7,e(y(n));case 7:e(S(!1)),e(k(!0));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return n.a.createElement("main",{className:"recent-searches-container"},n.a.createElement("div",{className:"header flex align-center justify-center"},n.a.createElement("h3",null,"Recent Searches")),t.length>0&&n.a.createElement(G,{searches:t,selectSearch:c}),n.a.createElement("div",{className:"delete-icn-wrapper flex align-center justify-flex-end ".concat(t.length>0?"unmute":"mute")},n.a.createElement(Q.a,{onClick:function(){e((function(e){return v.saveToStorage("user-searches",[]),e({type:"CLEAR-RECENT-SEARCHES"}),Promise.resolve()}))}})))}function z(){return n.a.createElement("main",{className:"soundcloud-main-container"},n.a.createElement("section",{className:"grid-container"},n.a.createElement(q,null),n.a.createElement(W,null),n.a.createElement(X,null)))}var Y=function(){return n.a.createElement("main",null,n.a.createElement(i.c,{className:"App"},n.a.createElement(i.a,{component:z,exact:!0,path:"/"})))},Z=a(43),$=Object(Z.a)(),ee=a(12),te=a(44),ae={isLoading:!1,centerImgPos:null,query:{searchBy:"",tracksPerPage:6,offset:0},tracks:[],recentSearches:[],readRecentSearch:!1,currTrack:null};var re=Object(ee.c)({appStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-IS-LOADING":return Object(m.a)(Object(m.a)({},e),{},{isLoading:t.status});case"UPDATE-CENTER-IMG-POS":return Object(m.a)(Object(m.a)({},e),{},{centerImgPos:t.params});case"UPDATE-QUERY":return Object(m.a)(Object(m.a)({},e),{},{query:Object(m.a)({},t.updatedQuery)});case"SET-TRACKS":return Object(m.a)(Object(m.a)({},e),{},{tracks:Object(l.a)(t.data)});case"CLEAR-TRACKS":return Object(m.a)(Object(m.a)({},e),{},{tracks:[]});case"UPDATE-RECENT_SEARCHES":return Object(m.a)(Object(m.a)({},e),{},{recentSearches:Object(l.a)(t.searches)});case"CLEAR-RECENT-SEARCHES":return Object(m.a)(Object(m.a)({},e),{},{recentSearches:[]});case"CLEAR-CURR-TRACK":return Object(m.a)(Object(m.a)({},e),{},{currTrack:null});case"SET-CURR-TRACK":return Object(m.a)(Object(m.a)({},e),{},{currTrack:Object(m.a)({},t.trackToSet)});case"UPDATE-IS-RECENT-SEARCH":return Object(m.a)(Object(m.a)({},e),{},{readRecentSearch:t.val});default:return e}}}),ne=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ee.d,ce=Object(ee.e)(re,ne(Object(ee.a)(te.a)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(E.a,{store:ce},n.a.createElement(i.b,{history:$},n.a.createElement(Y,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[49,1,2]]]);
//# sourceMappingURL=main.a20f7ea8.chunk.js.map